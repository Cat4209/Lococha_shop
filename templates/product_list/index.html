{% extends 'wrapper.html' %}
{% block header %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<link rel="stylesheet" href="{{url_for('static', filename='shop_list/css/style.css')}}">
{% endblock %}
{% block body %}
<div class="second_section_border">
    <div class="second_section">
        <div class="second_section_container">
            <div class="second_section_title"><span class="product">Product</span><span class="listing">Listing</span></div>
            <div class="second_section_url">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{url_for('main')}}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Product Listing</li>
                  </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="third_section">
    <div class="third_section_container">
        <div class="third_section_left_row">
            <div class="product_nav">Short by:</div>
            <div class="product_nav high_low"><a href="{% if arguments_len == 0 %}/product_list?order=2{% else %}/product_list?order=2{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['tag'] %}&tag={{arguments['tag']}}{% endif %}{% endif %}">Price high to low</a></div>
            <div class="product_nav"><a href="{% if arguments_len == 0 %}/product_list?order=1{% else %}/product_list?order=1{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['tag'] %}&tag={{arguments['tag']}}{% endif %}{% endif %}">Price low to high</a></div>
            <div class="product_nav"><a href="{% if arguments_len == 0 %}/product_list?order=3{% else %}/product_list?order=3{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['tag'] %}&tag={{arguments['tag']}}{% endif %}{% endif %}">Newest arrivals</a></div>
        </div>
        <div class="third_section_center">
            <form class="form-inline" method="GET">
                <input class="form-control mr-2" type="search" placeholder="Search" aria-label="Search" name="search" value="{{ request.args.get('search', '') }}">
                <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
        <div class="third_section_right_row">
            <span class="row_order"><a href="#"><i class="fas fa-align-left"></i></a></span>
            <span class="box_order"><a href="#"><i class="fas fa-th"></i></a></span>
        </div>
    </div>
</div>
<div class="box_fl">
    <div class="box_bar_1 box_bar"></div>
    <div class="box_bar_2 box_bar"></div>
    <div class="box_bar_3 box_bar"></div>
</div>
<div class="fourth_section">
        <div class="fourth_section_container">
            <div class="fourth_section_left">
                <div class="fourth_section_title fst">Categories</div>
                <div class="first_category category">
                    <div class="first_category_title category_title">Woman</div>
                    <div class="postcategory_container_1 postcategory_container">
                        <div class="postcategory postcategory_1"><a href="#">Clothes</a></div>
                        <div class="postcategory postcategory_2"><a href="#">Accessories</a></div>
                        <div class="postcategory postcategory_3"><a href="#">Shoes</a></div>
                    </div>
                    <div class="second_category_title category_title">Men</div>
                    <div class="postcategory_container_2 postcategory_container">
                        <div class="postcategory postcategory_4"><a href="#">Clothes</a></div>
                        <div class="postcategory postcategory_5"><a href="#">Accessories</a></div>
                        <div class="postcategory postcategory_6"><a href="#">Shoes</a></div>
                    </div>
                    <div class="third_category_title category_title">Kid</div>
                    <div class="postcategory_container_3 postcategory_container">
                        <div class="postcategory postcategory_7"><a href="#">Clothes</a></div>
                        <div class="postcategory postcategory_8"><a href="#">Accessories</a></div>
                        <div class="postcategory postcategory_9"><a href="#">Shoes</a></div>
                    </div>
                </div>
                <div class="fourth_section_title">Size</div>
                <div class="third_category category">
                    <div class="form-group">
                        <input type="radio" class="size" id="xs" value="xs" name="size">
                        <label for="xs" class="control-label" data-size="xs">xs</label>
                    </div>
                    <div class="form-group">
                        <input type="radio" class="size" id="s" value="s" name="size">
                        <label for="s" class="control-label" data-size="s">s</label>
                    </div>
                    <div class="form-group">
                        <input type="radio" class="size" id="m" value="m" name="size">
                        <label for="m" class="control-label" data-size="m">m</label>
                    </div>
                    <div class="form-group">
                        <input type="radio" class="size" id="l" value="l" name="size">
                        <label for="l" class="control-label" data-size="l">l</label>
                    </div>
                    <div class="form-group">
                        <input type="radio" class="size" id="xl" value="xl" name="size">
                        <label for="xl" class="control-label" data-size="xl">xl</label>
                    </div>
                    <div class="form-group">
                        <input type="radio" class="size" id="xxl" value="xxl" name="size">
                        <label for="xxl" class="control-label" data-size="xxl">xxl</label>
                    </div>
                </div>
                <div class="fourth_section_title">Price Range ($)</div>
                <div class="fourth_category category">
                   <div id='range' class="range">
                      <div id='rangeb' class='range__between'></div>
                        <button id='range1' class="range__button_1"></button>
                        <button id='range2' class="range__button_2"></button>
                        <input id='rangei1' class='range_inpt1' type='number' min='1' max='100'>
                        - <input id='rangei2' class='range_inpt2' type='number' min='1' max='100'>
                    </div>
                </div>
            <div class="fourth_section_title" style="margin-top: 106px;">Popular Tags</div>
            <div class="fivth_category category">
                <div class="tags tag_1"><a href="{% if arguments_len == 0 %}/product_list?tag=Hot{% else %}/product_list?tag=Hot{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">HOT</a></div>
                <div class="tags tag_2"><a href="{% if arguments_len == 0 %}/product_list?tag=New{% else %}/product_list?tag=New{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">NEW</a></div>
                <div class="tags tag_3"><a href="{% if arguments_len == 0 %}/product_list?tag=Sale{% else %}/product_list?tag=Sale{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">SALE</a></div>
                <div class="tags tag_4"><a href="/product_list">ALL</a></div>
            </div>
        </div>
        <div class="fourth_section_right">
            <div class="fourth_section_right_swiper swiper-container">
                <div class="fourth_section_products row swiper-wrapper">
                {% for post in pages.items %}
                    <div class="six_section_card swiper-slide col-4" data-size-xs="{{post.xs}}" data-size-s="{{post.s}}" data-size-m="{{post.m}}" data-size-l="{{post.l}}" data-size-xl="{{post.xl}}" data-size-xxl="{{post.xxl}}" data-price={{post.price}} data-gen="{{post.category_1}}" data-cat="{{post.category_2}}">
                    <div class="six_section_card_header">
                        <a href="{{url_for('item_details', slug=post.slug)}}">
                        <div class="six_section_header_image" style="background: url(../../static/uploads/{{post.image}}) no-repeat center center; background-size: cover;"></div>
                        </a>
                    <div class="tags">
                    {% for tag in post.tags %}
                    {% if tag.title == "New" %}
                        <div class="tag tag_new"><a href="{% if arguments_len == 0 %}/product_list?tag=New{% else %}/product_list?tag=New{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">NEW</a></div>
                    {% endif %}
                    {% if tag.title == "Sale" %}
                        <div class="tag tag_sale"><a href="{% if arguments_len == 0 %}/product_list?tag=Sale{% else %}/product_list?tag=Sale{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">SALE</a></div>
                    {% endif %}
                    {% if tag.title == "Hot" %}
                        <div class="tag tag_hot"><a href="{% if arguments_len == 0 %}/product_list?tag=Hot{% else %}/product_list?tag=Hot{% if arguments['page'] %}&page={{arguments['page']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">HOT</a></div>
                    {% endif %}
                    {% endfor %}
                    </div>
                    <div class="view_buy">
                    <div class="vb quick_buy"><a href="/buy/{{ post.id }}"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-handbag" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M8 1a2 2 0 0 0-2 2v2h4V3a2 2 0 0 0-2-2zm3 4V3a3 3 0 1 0-6 0v2H3.361a1.5 1.5 0 0 0-1.483 1.277L.85 13.13A2.5 2.5 0 0 0 3.322 16h9.356a2.5 2.5 0 0 0 2.472-2.87l-1.028-6.853A1.5 1.5 0 0 0 12.64 5H11zm-1 1v1.5a.5.5 0 0 0 1 0V6h1.639a.5.5 0 0 1 .494.426l1.028 6.851A1.5 1.5 0 0 1 12.678 15H3.322a1.5 1.5 0 0 1-1.483-1.723l1.028-6.851A.5.5 0 0 1 3.36 6H5v1.5a.5.5 0 0 0 1 0V6h4z"/>
                    </svg></a></div>
                        <div class="vb quick_view"><a href="{{url_for('item_details', slug=post.slug)}}"><i class="fas fa-eye"></i></a></div>
                        <div class="edit_post">
                            <a href="#"><i class="far fa-edit"></i></a>
                        </div>
                    </div>
                    <div class="colors">
                        <div class="color color" style="background: {{ post.color }};"></div>
                    {% if post.color_1 %}
                        <div class="color color_1" style="background: {{ post.color_1 }};"></div>
                    {% endif %}
                    {% if post.color_2 %}
                        <div class="color color_2" style="background: {{ post.color_2 }};"></div>
                    {% endif %}
                    {% if post.color_3 %}
                        <div class="color color_3" style="background: {{ post.color_3 }};"></div>
                    {% endif %}
                    </div>
                </div>
            <div class="six_section_card_footer mt-3">
                <div class="swiper_2_article">
                    <div class="swiper_2_title"><a href="{{url_for('item_details', slug=post.slug)}}">{{ post.name }}</a></div>
                    <div class="swiper_2_like">
                    {% if not current_user.is_authenticated %}
                        <a href="/login">
                            <div class="heart">
                                    <i class="far fa-heart"style="color: #2e2e2e;"></i>
                            </div>
                        </a>
                        {% else %}
                        <a href="{{url_for('add_wish', slug=post.slug)}}">
                            <div class="heart">
                                {% if post.users.all()|length > 0 %}
                                    {% for user in post.users.all() %}
                                    {% if user.id|int == current_user.get_id()|int %}
                                    <i class="fas fa-heart" style="color: red;"></i>
                                    {% else %}
                                    <i class="far fa-heart" style="color: #2e2e2e;"></i>
                                    {% endif %}
                                    {% endfor %}
                                {% else %}
                                      <i class="far fa-heart" style="color: #2e2e2e;"></i>
                                  {% endif %}
                                </div>
                            </a>     
                    {% endif %}
                    </div>
                </div>
                <div class="swiper_2_price mt-2">
                    <div class="old_price"></div>
                    <div class="new_price">${{ post.price }}</div>
                </div>
            </div>
            </div>
            {% endfor %}
            </div>
                <div class="swiper-pagination"></div>
            </div>
            {% if pages.pages > 1 %}
            <div class="pagination_container">
                <div class="pagination pagination-sm">
               {% for page in pages.iter_pages() %}
                    <div class="page-item"><a class="page-link {% if page == pages.page %}page-link_active{% endif %}" href="{% if arguments_len == 0 %}/product_list?page={{page}}{% else %}/product_list?page={{page}}{% if arguments['tag'] %}&tag={{arguments['tag']}}{% endif %}{% if arguments['order'] %}&order={{arguments['order']}}{% endif %}{% endif %}">{{page}}</a></div>
                {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
{% block footer %}
<script src="{{url_for('static', filename='shop_list/js/script.js')}}"></script>
{% endblock %}